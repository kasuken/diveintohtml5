<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HTML5 Canvas Tutorial - 2D Graphics and Drawing with JavaScript</title>
<meta name="description" content="Learn HTML5 Canvas API for 2D graphics. Complete tutorial with examples covering drawing, animations, HiDPI support, and modern best practices.">
<meta name="keywords" content="HTML5 canvas, canvas tutorial, 2D graphics JavaScript, canvas API, drawing with JavaScript, canvas animation">
<meta name="author" content="Web Development Education">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://kasuken.github.io/diveintohtml5/canvas.html">

<!-- Open Graph Meta Tags -->
<meta property="og:title" content="HTML5 Canvas Tutorial - 2D Graphics and Drawing with JavaScript">
<meta property="og:description" content="Learn HTML5 Canvas API for 2D graphics. Complete tutorial with examples covering drawing, animations, HiDPI support, and modern best practices.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://kasuken.github.io/diveintohtml5/canvas.html">
<meta property="og:image" content="https://kasuken.github.io/diveintohtml5/i/unicorn-og.png">

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="HTML5 Canvas Tutorial - 2D Graphics and Drawing with JavaScript">
<meta name="twitter:description" content="Learn HTML5 Canvas API for 2D graphics. Complete tutorial with examples covering drawing, animations, HiDPI support, and modern best practices.">
<meta name="twitter:image" content="https://kasuken.github.io/diveintohtml5/i/unicorn-og.png">

<link rel="stylesheet" href="unicorn-style.css">
<style>
h1:before{content:"Canvas Magic: "}
#demo-canvas { 
  border: 3px solid #9b59b6; 
  border-radius: 15px; 
  display: block; 
  margin: 2em auto;
  box-shadow: 0 5px 20px rgba(155,89,182,0.4);
}
</style>
</head>
<body>

<p>ü¶Ñ You are here: <a href="index.html">Unicorn Home</a> <span class="u">‚ú®</span> <a href="index.html">Dive Into Unicorn Magic</a> <span class="u">‚ú®</span></p>

<h1><br>Let's Call It a Rainbow Drawing Surface</h1>

<p class="a">üåü ‚ú® üåà</p>

<p class="f"><span style="font-size:4em;float:left;line-height:0.8;margin:0.1em 0.2em 0 0;background:linear-gradient(45deg,#ffd700,#ff69b4,#87ceeb,#9b59b6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:bold;">I</span>magine you have a magical piece of parchment where you can paint anything you can dream ‚Äî rainbows, unicorns, sparkles, or even realistic portraits of your favorite mythical creatures. That's exactly what the <strong>canvas element</strong> gives you: a blank drawing surface that you control with JavaScript!</p>

<h2>üé® What Is Canvas?</h2>

<p>The <code>&lt;canvas&gt;</code> element is an HTML tag that creates a rectangular area where you can draw using JavaScript. Unlike images which are static, canvas drawings are created programmatically, meaning you can generate them on the fly, animate them, and make them interactive!</p>

<pre><code>&lt;canvas id="myCanvas" width="500" height="300"&gt;
  Your browser doesn't support unicorn magic! üò¢
&lt;/canvas&gt;</code></pre>

<p>The text inside the canvas element is fallback content for browsers that don't support canvas (like trying to show a rainbow to a color-blind dragon).</p>

<h2>üñåÔ∏è Drawing Your First Rectangle (Modern JS)</h2>

<p>Let's start simple. Here's how to draw a rectangle filled with unicorn purple:</p>

<pre><code>const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');

// Fill with unicorn purple!
ctx.fillStyle = '#9b59b6';
ctx.fillRect(10, 10, 100, 50);

// 2025 Tip: Set canvas size via JS, not CSS to avoid blurriness!
canvas.width = 800;
canvas.height = 600;</code></pre>

<p>The <code>getContext('2d')</code> method returns a drawing context ‚Äî think of it as your magical paintbrush and palette combined!</p>

<p>üí° <strong>Canvas Resolution:</strong> Always set <code>width</code> and <code>height</code> attributes on the canvas element, not via CSS, to avoid pixelation!</p>

<h2>üåà Drawing Rainbows (Well, Colorful Shapes)</h2>

<p>Canvas can draw all sorts of shapes. Here are some examples:</p>

<h3>Rectangles</h3>

<pre><code>// Filled rectangle (solid)
ctx.fillStyle = '#ff69b4';
ctx.fillRect(x, y, width, height);

// Stroked rectangle (outline only)
ctx.strokeStyle = '#87ceeb';
ctx.strokeRect(x, y, width, height);

// Clear rectangle (erases)
ctx.clearRect(x, y, width, height);</code></pre>

<h3>Circles (Actually Arcs)</h3>

<pre><code>ctx.beginPath();
ctx.arc(x, y, radius, 0, 2 * Math.PI);
ctx.fillStyle = '#ffd700';
ctx.fill();</code></pre>

<h3>Lines and Paths</h3>

<pre><code>ctx.beginPath();
ctx.moveTo(50, 50);  // Starting point
ctx.lineTo(200, 100); // Draw line to here
ctx.lineTo(100, 200); // And to here
ctx.strokeStyle = '#9b59b6';
ctx.lineWidth = 3;
ctx.stroke();</code></pre>

<h2>ü¶Ñ Interactive Demo</h2>

<canvas id="demo-canvas" width="600" height="400"></canvas>

<p style="text-align:center;margin-top:1em;"><button onclick="drawUnicornMagic()" style="background:linear-gradient(135deg,#667eea,#764ba2);color:white;border:none;padding:1em 2em;border-radius:25px;font-size:1.1em;cursor:pointer;box-shadow:0 5px 15px rgba(155,89,182,0.4);">‚ú® Draw Unicorn Magic! ‚ú®</button></p>

<h2>üé≠ Text on Canvas</h2>

<p>You can also draw text on canvas, perfect for adding mystical inscriptions:</p>

<pre><code>ctx.font = '30px Cinzel';
ctx.fillStyle = '#9b59b6';
ctx.fillText('Unicorn Magic!', 50, 50);

// Or with an outline
ctx.strokeStyle = '#ff69b4';
ctx.strokeText('Sparkles!', 50, 100);</code></pre>

<h2>üñºÔ∏è Images on Canvas (Modern)</h2>

<p>You can draw images onto the canvas, manipulate them, and even create filters:</p>

<pre><code>const img = new Image();
img.onload = () =&gt; {
  // Draw image (basic)
  ctx.drawImage(img, 0, 0);
  
  // Draw with size control
  ctx.drawImage(img, 0, 0, 200, 200);
  
  // Draw portion of image (sprite sheets!)
  ctx.drawImage(img, 
    srcX, srcY, srcWidth, srcHeight,  // Source rectangle
    destX, destY, destWidth, destHeight  // Destination
  );
};
img.src = 'unicorn.png';

// Modern: Using async/await with promises
async function loadImage(url) {
  return new Promise((resolve, reject) =&gt; {
    const img = new Image();
    img.onload = () =&gt; resolve(img);
    img.onerror = reject;
    img.src = url;
  });
}

const unicorn = await loadImage('unicorn.png');
ctx.drawImage(unicorn, 0, 0);</code></pre>

<h2>‚ú® Gradients and Patterns (Enhanced)</h2>

<p>Create beautiful rainbow gradients:</p>

<pre><code>// Linear gradient
const gradient = ctx.createLinearGradient(0, 0, 200, 0);
gradient.addColorStop(0, '#9b59b6');
gradient.addColorStop(0.5, '#ff69b4');
gradient.addColorStop(1, '#87ceeb');
ctx.fillStyle = gradient;
ctx.fillRect(0, 0, 200, 100);

// Radial gradient (like unicorn magic emanating)
const radial = ctx.createRadialGradient(100, 100, 10, 100, 100, 100);
radial.addColorStop(0, '#ffd700');
radial.addColorStop(1, '#9b59b6');
ctx.fillStyle = radial;
ctx.arc(100, 100, 100, 0, Math.PI * 2);
ctx.fill();

// Conic gradient (NEW in modern browsers!)
const conic = ctx.createConicGradient(0, 100, 100);
conic.addColorStop(0, 'red');
conic.addColorStop(0.25, 'yellow');
conic.addColorStop(0.5, 'green');
conic.addColorStop(0.75, 'blue');
conic.addColorStop(1, 'red');
ctx.fillStyle = conic;
ctx.fillRect(0, 0, 200, 200);</code></pre>

<p>üÜï <strong>2025 Feature:</strong> Conic gradients create circular rainbow effects - perfect for color wheels and magical auras!</p>

<h2>üé¨ Animation (Modern Best Practices)</h2>

<p>The real magic happens when you animate! Use <code>requestAnimationFrame</code> for smooth, 60fps animations:</p>

<pre><code>let x = 0;
let animationId;

function animate(timestamp) {
  // Clear canvas
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  // Draw something
  ctx.fillStyle = '#ff69b4';
  ctx.fillRect(x, 100, 50, 50);
  
  // Update position
  x += 2;
  if (x > canvas.width) x = -50;
  
  // Continue animation
  animationId = requestAnimationFrame(animate);
}

// Start animation
animationId = requestAnimationFrame(animate);

// Stop animation when needed (important!)
function stopAnimation() {
  cancelAnimationFrame(animationId);
}

// 2025 Best Practice: Delta time for frame-independent movement
let lastTime = 0;
function animateSmooth(timestamp) {
  const deltaTime = (timestamp - lastTime) / 1000; // seconds
  lastTime = timestamp;
  
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  // Move at pixels per second, not per frame!
  x += 100 * deltaTime; // 100 pixels per second
  ctx.fillRect(x, 100, 50, 50);
  
  requestAnimationFrame(animateSmooth);
}
requestAnimationFrame(animateSmooth);</code></pre>

<p>üí° <strong>Pro Tip:</strong> Use delta time for smooth animations that work at any frame rate!</p>

<h2>üí° 2025 Canvas Best Practices</h2>

<ol style="list-style: decimal; padding-left: 2em;">
<li style="margin: 1em 0;"><strong>Set size properly</strong> ‚Äî Use <code>canvas.width</code> and <code>canvas.height</code> attributes, not CSS, to avoid blurriness!</li>

<li style="margin: 1em 0;"><strong>Use requestAnimationFrame</strong> ‚Äî 60fps animations, not setTimeout. Remember to cancel it when done!</li>

<li style="margin: 1em 0;"><strong>HiDPI/Retina support</strong> ‚Äî Scale canvas by <code>devicePixelRatio</code> for crisp rendering on high-res displays.</li>

<li style="margin: 1em 0;"><strong>OffscreenCanvas for performance</strong> ‚Äî Render in Web Workers for heavy operations (modern browsers!).</li>

<li style="margin: 1em 0;"><strong>Save/restore context</strong> ‚Äî Use <code>ctx.save()</code> and <code>ctx.restore()</code> when temporarily changing styles.</li>

<li style="margin: 1em 0;"><strong>Batch operations</strong> ‚Äî Minimize state changes and draw calls for better performance.</li>

<li style="margin: 1em 0;"><strong>Consider WebGL</strong> ‚Äî For complex graphics, games, or 3D, use WebGL or libraries like Three.js.</li>

<li style="margin: 1em 0;"><strong>Accessibility</strong> ‚Äî Canvas isn't accessible by default. Provide fallback content or use ARIA labels.</li>
</ol>

<h3>üöÄ High-DPI Canvas (Retina Ready)</h3>
<pre><code>// Make canvas crisp on high-DPI displays
function setupHiDPICanvas(canvas) {
  const dpr = window.devicePixelRatio || 1;
  const rect = canvas.getBoundingClientRect();
  
  canvas.width = rect.width * dpr;
  canvas.height = rect.height * dpr;
  
  const ctx = canvas.getContext('2d');
  ctx.scale(dpr, dpr);
  
  return ctx;
}</code></pre>

<blockquote>
<p>"Canvas is like a unicorn's imagination made real ‚Äî limited only by your creativity and JavaScript skills."</p>
<cite>‚Äî Master Canvas Wizard</cite>
</blockquote>

<p class="a">üåü ‚ú® üåà</p>

<p><a href="video.html">Continue to Chapter 6: Moving Pictures from the Unicorn Realm ‚Üí</a></p>

<div class="pf">
<h4>üé® 2025 Canvas Resources üé®</h4>
<div class="moneybags">
<p>Canvas is incredibly powerful! Create games, data visualizations, image editors, generative art, and more!</p>
<p style="margin-top:1em;"><strong>Modern Canvas Libraries (2025):</strong></p>
<ul style="list-style:disc;padding-left:2em;margin-top:0.5em;">
<li><strong>Konva.js</strong> ‚Äî High-level 2D canvas library with events</li>
<li><strong>Fabric.js</strong> ‚Äî Interactive canvas objects and SVG parsing</li>
<li><strong>P5.js</strong> ‚Äî Creative coding and generative art</li>
<li><strong>Paper.js</strong> ‚Äî Vector graphics scripting</li>
<li><strong>PixiJS</strong> ‚Äî WebGL-powered 2D rendering (super fast!)</li>
<li><strong>Three.js</strong> ‚Äî 3D graphics with WebGL</li>
</ul>
<p style="margin-top:1em;"><strong>New 2025 Features:</strong> OffscreenCanvas (render in Web Workers), Conic gradients, better text rendering, Canvas2D filters!</p>
<p style="margin-top:1em;">üìö <strong>Resources:</strong> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API" target="_blank" style="color:#9b59b6;font-weight:bold;">MDN Canvas API</a> is the best reference!</p>
</div>
</div>

<p class="c">ü¶Ñ Enchanted with Unicorn Magic ü¶Ñ<br>
<small style="opacity:0.7;">Original wisdom by <a href="about.html">Mark Pilgrim</a> ‚Ä¢ Unicorn magic by Web Wizards</small></p>

<script src="j/jquery.js"></script>
<script src="j/dih5.js"></script>
<script>
function drawUnicornMagic() {
  var canvas = document.getElementById('demo-canvas');
  if (!canvas.getContext) return;
  
  var ctx = canvas.getContext('2d');
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  
  // Rainbow background gradient
  var gradient = ctx.createLinearGradient(0, 0, 600, 400);
  gradient.addColorStop(0, '#667eea');
  gradient.addColorStop(0.5, '#764ba2');
  gradient.addColorStop(1, '#f093fb');
  ctx.fillStyle = gradient;
  ctx.fillRect(0, 0, 600, 400);
  
  // Draw stars
  ctx.fillStyle = '#ffd700';
  for (var i = 0; i < 20; i++) {
    var x = Math.random() * 600;
    var y = Math.random() * 400;
    ctx.beginPath();
    ctx.arc(x, y, 3, 0, 2 * Math.PI);
    ctx.fill();
  }
  
  // Draw unicorn text
  ctx.font = 'bold 48px Cinzel';
  ctx.fillStyle = 'white';
  ctx.textAlign = 'center';
  ctx.shadowColor = 'rgba(255,105,180,0.8)';
  ctx.shadowBlur = 20;
  ctx.fillText('ü¶Ñ Unicorn Magic! ü¶Ñ', 300, 200);
  
  // Draw rainbow arc
  var colors = ['#ff0000', '#ff7f00', '#ffff00', '#00ff00', '#0000ff', '#4b0082', '#9400d3'];
  for (var i = 0; i < colors.length; i++) {
    ctx.beginPath();
    ctx.arc(300, 400, 200 - i * 15, Math.PI, 0);
    ctx.strokeStyle = colors[i];
    ctx.lineWidth = 10;
    ctx.stroke();
  }
}

// Draw initial magic
drawUnicornMagic();
</script>

</body>
</html>
