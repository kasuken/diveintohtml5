<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<title>Unicorn Detection Spells - Dive Into Unicorn Magic âœ¨ğŸ¦„</title>
<link rel="stylesheet" href="unicorn-style.css">
<style>
h1:before{content:"Detection Magic: "}
</style>
</head>
<body>

<p>ğŸ¦„ You are here: <a href="index.html">Unicorn Home</a> <span class="u">âœ¨</span> <a href="index.html">Dive Into Unicorn Magic</a> <span class="u">âœ¨</span></p>

<h1><br>Finding Magic in Every Browser</h1>

<p class="a">ğŸŒŸ âœ¨ ğŸŒˆ</p>

<p class="f"><span style="font-size:4em;float:left;line-height:0.8;margin:0.1em 0.2em 0 0;background:linear-gradient(45deg,#ffd700,#ff69b4,#87ceeb);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:bold;">D</span>etecting unicorn magic in the wild is easier than you might think, my dear apprentice wizard! Unlike trying to spot an actual unicorn (which requires being pure of heart and offering the perfect apple), detecting browser capabilities is a matter of asking the right questions in JavaScript.</p>

<h2>ğŸ”® The Art of Feature Detection</h2>

<p>In the old days, web developers would try to detect which browser someone was using and then guess what features it supported. This was about as reliable as guessing which way a unicorn would gallop. Instead, we use <strong>feature detection</strong> â€” we ask directly: "Can you do this magical thing?"</p>

<h3>âœ¨ Modern Feature Detection (No Libraries Needed!)</h3>

<p>In 2025, we don't need external libraries like Modernizr anymore! Modern browsers support all the features we need, and we can detect capabilities using native JavaScript. Let's learn the best practices for feature detection!</p>

<pre><code>// Modern approach - direct feature detection
if ('canvas' in document.createElement('canvas')) {
  // Draw rainbows with canvas magic! ğŸŒˆ
} else {
  // Use a fallback spell (rare in 2025!)
}</code></pre>

<h2>ğŸ¦„ Detection Techniques for Each Magic Type</h2>

<h3>Canvas Magic Detection</h3>

<p>To detect if a browser can paint on the magical canvas (though all modern browsers support this now!):</p>

<pre><code>function supportsCanvas() {
  const elem = document.createElement('canvas');
  return !!(elem.getContext && elem.getContext('2d'));
}

// Modern browsers (2025): This is almost always true!
// Consider using canvas directly with error handling instead</code></pre>

<p>ğŸ’¡ <strong>2025 Best Practice:</strong> Instead of checking, just use canvas directly. All modern browsers support it. Focus error handling on actual usage failures, not feature detection.</p>

<h3>Video Magic Detection</h3>

<p>For video codec support (useful for choosing the right format):</p>

<pre><code>function canPlayVideoType(type) {
  const video = document.createElement('video');
  return video.canPlayType(type) !== '';
}

// Check specific formats
const supportsMP4 = canPlayVideoType('video/mp4');
const supportsWebM = canPlayVideoType('video/webm');
const supportsAV1 = canPlayVideoType('video/mp4; codecs="av01.0.05M.08"');

// Modern best practice: Use MP4 (H.264/H.265) as primary,
// WebM (VP9/AV1) as alternative for best browser support</code></pre>

<p>ğŸ’¡ <strong>2025 Best Practice:</strong> Use <code>&lt;video&gt;</code> with multiple <code>&lt;source&gt;</code> elements. The browser automatically picks the first supported format!</p>

<h3>Geolocation Magic Detection</h3>

<p>Finding where unicorns roam (and where you are):</p>

<pre><code>if ('geolocation' in navigator) {
  // You can track unicorn locations! ğŸ—ºï¸
  navigator.geolocation.getCurrentPosition(showPosition);
}

// Modern alternative using Permissions API
async function checkGeolocationPermission() {
  const result = await navigator.permissions.query({name: 'geolocation'});
  if (result.state === 'granted') {
    // Permission already granted!
  } else if (result.state === 'prompt') {
    // Will ask user
  } else {
    // Permission denied
  }
}</code></pre>

<h3>Local Storage Magic Detection</h3>

<p>Checking if you have a magical treasure chest:</p>

<pre><code>function supportsLocalStorage() {
  try {
    const test = '__storage_test__';
    localStorage.setItem(test, test);
    localStorage.removeItem(test);
    return true;
  } catch(e) {
    // Blocked by privacy settings, quota exceeded, or not supported
    return false;
  }
}

// Modern browsers (2025): localStorage is universally supported
// But can be disabled in private browsing mode!</code></pre>

<p>ğŸ’¡ <strong>2025 Best Practice:</strong> All modern browsers support localStorage, but users may have it disabled (private mode, cookies blocked). Always wrap in try-catch!</p>

<h2>âš¡ Polyfills Are Mostly History Now!</h2>

<p>In 2025, polyfills are rarely needed! Modern browsers (Chrome, Firefox, Safari, Edge) all support HTML5 features natively. The days of Internet Explorer are long gone! ğŸ‰</p>

<p><strong>When you might still need polyfills:</strong></p>
<ul style="list-style:disc;padding-left:2em;">
<li style="margin:0.5em 0;">Very new/experimental features (check <a href="https://caniuse.com" target="_blank">Can I Use</a>)</li>
<li style="margin:0.5em 0;">Supporting very old enterprise browsers (rare in 2025)</li>
<li style="margin:0.5em 0;">Using cutting-edge CSS/JS proposals</li>
</ul>

<p>ğŸ’¡ <strong>Modern Approach:</strong> Use feature detection with graceful degradation, not polyfills. Let users know if their browser is too old instead of bloating your code!</p>

<blockquote>
<p>"Detection is not about shutting people out; it's about welcoming everyone in, each through their own magical doorway."</p>
<cite>â€” The Inclusive Unicorn Manifesto</cite>
</blockquote>

<h2>ğŸŒˆ 2025 Best Practices for Feature Detection</h2>

<ol style="list-style: decimal; padding-left: 2em;">
<li style="margin: 1em 0;"><strong>Use native feature detection.</strong> No libraries needed in 2025! Check properties directly: <code>'geolocation' in navigator</code></li>

<li style="margin: 1em 0;"><strong>Assume modern browsers.</strong> Focus on the latest 2-3 years of browsers. Internet Explorer is dead! ğŸª¦</li>

<li style="margin: 1em 0;"><strong>Use try-catch for storage APIs.</strong> Features may be disabled by privacy settings even in modern browsers.</li>

<li style="margin: 1em 0;"><strong>Check Can I Use (caniuse.com).</strong> See real-world browser support statistics before implementing features.</li>

<li style="margin: 1em 0;"><strong>Provide user feedback, not silent degradation.</strong> If a required feature isn't available, tell users to upgrade their browser!</li>

<li style="margin: 1em 0;"><strong>Use Progressive Enhancement.</strong> Build a solid baseline, then enhance with modern features.</li>

<li style="margin: 1em 0;"><strong>Leverage the Permissions API.</strong> Modern way to check and request permissions for geolocation, notifications, etc.</li>
</ol>

<h2>ğŸ“Š 2025 Feature Detection Reference</h2>

<table>
<thead>
<tr>
<th>Magical Feature</th>
<th>Detection Method</th>
<th>2025 Support</th>
</tr>
</thead>
<tbody>
<tr>
<td>Canvas</td>
<td><code>!!elem.getContext?.('2d')</code></td>
<td>âœ… Universal (99.9%+)</td>
</tr>
<tr>
<td>Video</td>
<td><code>elem.canPlayType('video/mp4')</code></td>
<td>âœ… Universal</td>
</tr>
<tr>
<td>Geolocation</td>
<td><code>'geolocation' in navigator</code></td>
<td>âœ… Universal</td>
</tr>
<tr>
<td>localStorage</td>
<td><code>try { localStorage.test } catch</code></td>
<td>âœ… Universal (but may be disabled)</td>
</tr>
<tr>
<td>Service Workers</td>
<td><code>'serviceWorker' in navigator</code></td>
<td>âœ… Universal (requires HTTPS)</td>
</tr>
<tr>
<td>Web Workers</td>
<td><code>'Worker' in window</code></td>
<td>âœ… Universal</td>
</tr>
<tr>
<td>IndexedDB</td>
<td><code>'indexedDB' in window</code></td>
<td>âœ… Universal</td>
</tr>
<tr>
<td>WebGL</td>
<td><code>!!canvas.getContext('webgl')</code></td>
<td>âœ… 98%+ support</td>
</tr>
<tr>
<td>WebSockets</td>
<td><code>'WebSocket' in window</code></td>
<td>âœ… Universal</td>
</tr>
<tr>
<td>WebRTC</td>
<td><code>'RTCPeerConnection' in window</code></td>
<td>âœ… 97%+ support</td>
</tr>
</tbody>
</table>

<p style="margin-top:1em;font-style:italic;">ğŸ’¡ Note: AppCache (<code>applicationCache</code>) is deprecated and removed from modern browsers. Use Service Workers instead!</p>

<p class="a">ğŸŒŸ âœ¨ ğŸŒˆ</p>

<p><a href="semantics.html">Continue to Chapter 4: The Language of Unicorns â†’</a></p>

<div class="pf">
<h4>ğŸ” 2025 Detection Wisdom ğŸ”</h4>
<div class="moneybags">
<p>This chapter is inspired by Mark Pilgrim's comprehensive guide to HTML5 feature detection, updated for 2025 modern web standards!</p>
<p style="margin-top:1em;"><strong>The Big Change:</strong> In 2025, we no longer need Modernizr or polyfills for basic HTML5 features. All modern browsers (Chrome, Firefox, Safari, Edge) have excellent support. Internet Explorer is officially retired! ğŸ‰</p>
<p style="margin-top:1em;"><strong>Focus your efforts on:</strong> Progressive enhancement, proper error handling, and informing users with very old browsers to upgrade rather than maintaining legacy code.</p>
<p style="margin-top:1em;">Check <a href="https://caniuse.com" target="_blank" style="color:#9b59b6;font-weight:bold;">Can I Use</a> for real-time browser support data!</p>
</div>
</div>

<p class="c">ğŸ¦„ Enchanted with Unicorn Magic ğŸ¦„<br>
<small style="opacity:0.7;">Original wisdom by <a href="about.html">Mark Pilgrim</a> â€¢ Unicorn magic by Web Wizards</small></p>

<script src="j/jquery.js"></script>
<script src="j/dih5.js"></script>

</body>
</html>
