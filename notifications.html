<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Web Notifications API - Desktop Alerts and Push Notifications</title>
<meta name="description" content="Learn Web Notifications and Push API. Send desktop alerts, handle permissions, and implement push notifications for user engagement.">
<meta name="keywords" content="web notifications, push notifications, notification API, desktop alerts, push API, browser notifications">
<meta name="author" content="Web Development Education">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://yourdomain.com/notifications.html">

<!-- Open Graph Meta Tags -->
<meta property="og:title" content="Web Notifications API - Desktop Alerts and Push Notifications">
<meta property="og:description" content="Learn Web Notifications and Push API. Send desktop alerts, handle permissions, and implement push notifications for user engagement.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://yourdomain.com/notifications.html">
<meta property="og:image" content="https://yourdomain.com/i/unicorn-og.png">

<!-- Twitter Card Meta Tags -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Web Notifications API - Desktop Alerts and Push Notifications">
<meta name="twitter:description" content="Learn Web Notifications and Push API. Send desktop alerts, handle permissions, and implement push notifications for user engagement.">
<meta name="twitter:image" content="https://yourdomain.com/i/unicorn-og.png">

<link rel="stylesheet" href="unicorn-style.css">
<style>
h1:before{content:"Alert Magic: "}
</style>
</head>
<body>

<p>ğŸ¦„ You are here: <a href="index.html">Unicorn Home</a> <span class="u">âœ¨</span> <a href="index.html">Dive Into Unicorn Magic</a> <span class="u">âœ¨</span></p>

<h1><br>Magical Desktop Alerts</h1>

<p class="a">ğŸŒŸ âœ¨ ğŸŒˆ</p>

<p class="f"><span style="font-size:4em;float:left;line-height:0.8;margin:0.1em 0.2em 0 0;background:linear-gradient(45deg,#ffd700,#ff69b4,#87ceeb,#9b59b6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;font-weight:bold;">W</span>eb Notifications allow your website to send alerts to users even when they're not actively looking at your page â€” like a unicorn tapping you on the shoulder to deliver an important message! These notifications appear outside the browser window, on the user's desktop or mobile device.</p>

<h2>ğŸ”” What Are Web Notifications?</h2>

<p>Web Notifications let you send system-level notifications that appear even when:</p>
<ul style="list-style:disc;padding-left:2em;">
<li style="margin:0.5em 0;">User is on a different tab</li>
<li style="margin:0.5em 0;">Browser is minimized</li>
<li style="margin:0.5em 0;">User is in another application</li>
<li style="margin:0.5em 0;">With Service Workers: Even when browser is closed!</li>
</ul>

<h2>ğŸš€ Basic Notification (2025)</h2>

<p><strong>Step 1: Request Permission</strong></p>
<pre><code>// Modern async/await approach
async function requestNotificationPermission() {
  if (!('Notification' in window)) {
    console.log('This browser does not support notifications');
    return false;
  }
  
  if (Notification.permission === 'granted') {
    console.log('âœ… Already have permission');
    return true;
  }
  
  if (Notification.permission === 'denied') {
    console.log('âŒ User denied permissions');
    return false;
  }
  
  // Ask for permission
  const permission = await Notification.requestPermission();
  return permission === 'granted';
}

// Call this on user interaction (button click)
document.getElementById('enableBtn').onclick = async () => {
  const granted = await requestNotificationPermission();
  if (granted) {
    showNotification('ğŸ‰ Notifications enabled!');
  }
};</code></pre>

<p><strong>Step 2: Show Notification</strong></p>
<pre><code>function showNotification(title, options = {}) {
  if (Notification.permission === 'granted') {
    const notification = new Notification(title, {
      body: options.body || 'Default message',
      icon: options.icon || '/unicorn-icon.png',
      badge: options.badge || '/unicorn-badge.png',
      tag: options.tag || 'default',
      requireInteraction: options.requireInteraction || false,
      data: options.data || {},
      ...options
    });
    
    // Handle clicks
    notification.onclick = (e) => {
      console.log('Notification clicked!', e);
      window.focus();
      notification.close();
    };
    
    return notification;
  }
}

// Usage
showNotification('New Unicorn Message!', {
  body: 'Sparkles sent you a magical greeting âœ¨',
  icon: '/images/sparkles.png',
  tag: 'chat-message'
});</code></pre>

<h2>âš™ï¸ Notification Options</h2>

<pre><code>const notification = new Notification('Unicorn Alert!', {
  // Required
  body: 'Rainbow has appeared in the meadow!',
  
  // Icons
  icon: '/unicorn-icon.png',     // Main icon (usually square)
  badge: '/unicorn-badge.png',   // Small icon for notification area
  image: '/rainbow.jpg',         // Large preview image
  
  // Behavior
  tag: 'unicorn-sighting',       // Unique ID (replaces existing with same tag)
  requireInteraction: false,     // Stay until dismissed?
  silent: false,                 // No sound?
  vibrate: [200, 100, 200],     // Vibration pattern (mobile)
  
  // Actions (Service Worker notifications only)
  actions: [
    { action: 'view', title: 'ğŸ‘€ View', icon: '/icons/view.png' },
    { action: 'dismiss', title: 'âŒ Dismiss', icon: '/icons/close.png' }
  ],
  
  // Visual
  dir: 'auto',                   // Text direction: 'auto', 'ltr', 'rtl'
  lang: 'en',                    // Language code
  
  // Custom data
  data: {
    url: '/unicorn/rainbow',
    timestamp: Date.now()
  },
  
  // Timestamp
  timestamp: Date.now(),
  
  // Renotify (with same tag)
  renotify: false
});</code></pre>

<h2>ğŸ¯ Check Permission Status</h2>

<pre><code>// Three possible states
switch (Notification.permission) {
  case 'granted':
    console.log('âœ… Can show notifications');
    break;
  case 'denied':
    console.log('âŒ User blocked notifications');
    break;
  case 'default':
    console.log('â³ Need to ask for permission');
    break;
}

// Modern Permissions API
const permission = await navigator.permissions.query({ name: 'notifications' });
console.log('Permission state:', permission.state); // 'granted', 'denied', 'prompt'

// Listen for permission changes
permission.addEventListener('change', () => {
  console.log('Permission changed to:', permission.state);
});</code></pre>

<h2>ğŸ”§ Service Worker Notifications</h2>

<p>More powerful notifications that work even when browser is closed!</p>

<pre><code>// In your main script
async function showPersistentNotification() {
  const registration = await navigator.serviceWorker.ready;
  
  await registration.showNotification('Unicorn Update!', {
    body: 'New magical features available!',
    icon: '/icon-192.png',
    badge: '/badge-72.png',
    actions: [
      { action: 'open', title: 'Open App', icon: '/icons/open.png' },
      { action: 'later', title: 'Remind Later', icon: '/icons/clock.png' }
    ],
    data: {
      url: '/new-features',
      timestamp: Date.now()
    },
    tag: 'update-notification',
    requireInteraction: true
  });
}

// In service worker (sw.js)
self.addEventListener('notificationclick', (event) => {
  event.notification.close();
  
  const urlToOpen = event.notification.data.url;
  
  if (event.action === 'open') {
    event.waitUntil(
      clients.openWindow(urlToOpen)
    );
  } else if (event.action === 'later') {
    // Schedule reminder
    console.log('Reminder scheduled');
  } else {
    // Default click (no action button)
    event.waitUntil(
      clients.openWindow(urlToOpen)
    );
  }
});

self.addEventListener('notificationclose', (event) => {
  console.log('Notification closed:', event.notification.tag);
  // Track dismissals
});</code></pre>

<h2>ğŸ“± Push Notifications</h2>

<p>Receive notifications from server even when site isn't open!</p>

<pre><code>// Subscribe to push notifications
async function subscribeToPush() {
  const registration = await navigator.serviceWorker.ready;
  
  // Request permission first
  const permission = await Notification.requestPermission();
  if (permission !== 'granted') {
    throw new Error('Permission not granted');
  }
  
  // Subscribe
  const subscription = await registration.pushManager.subscribe({
    userVisibleOnly: true,
    applicationServerKey: urlBase64ToUint8Array(PUBLIC_VAPID_KEY)
  });
  
  // Send subscription to server
  await fetch('/api/subscribe', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(subscription)
  });
  
  console.log('âœ… Subscribed to push notifications');
  return subscription;
}

// In service worker - handle incoming push
self.addEventListener('push', (event) => {
  const data = event.data.json();
  
  const options = {
    body: data.body,
    icon: data.icon || '/icon-192.png',
    badge: '/badge-72.png',
    data: data.url ? { url: data.url } : {}
  };
  
  event.waitUntil(
    self.registration.showNotification(data.title, options)
  );
});

// Helper function for VAPID key
function urlBase64ToUint8Array(base64String) {
  const padding = '='.repeat((4 - base64String.length % 4) % 4);
  const base64 = (base64String + padding)
    .replace(/\-/g, '+')
    .replace(/_/g, '/');
  
  const rawData = window.atob(base64);
  const outputArray = new Uint8Array(rawData.length);
  
  for (let i = 0; i < rawData.length; ++i) {
    outputArray[i] = rawData.charCodeAt(i);
  }
  return outputArray;
}</code></pre>

<h2>ğŸ¨ Practical Examples</h2>

<h3>Chat Message Notification</h3>
<pre><code>class ChatNotifications {
  static async notify(message) {
    if (Notification.permission !== 'granted') {
      return;
    }
    
    // Don't notify if tab is active
    if (document.hidden) {
      const notification = new Notification(message.sender, {
        body: message.text,
        icon: message.avatar,
        tag: `chat-${message.senderId}`,
        data: {
          chatId: message.chatId,
          messageId: message.id
        }
      });
      
      notification.onclick = () => {
        window.focus();
        openChat(message.chatId);
        notification.close();
      };
      
      // Auto-close after 5 seconds
      setTimeout(() => notification.close(), 5000);
    }
  }
}

// Usage
ChatNotifications.notify({
  sender: 'Sparkles',
  text: 'Want to go on a magical adventure? ğŸ¦„',
  avatar: '/avatars/sparkles.png',
  senderId: 'user123',
  chatId: 'chat456',
  id: 'msg789'
});</code></pre>

<h3>Background Task Complete</h3>
<pre><code>// When long-running task completes
async function notifyTaskComplete(taskName, result) {
  if (Notification.permission === 'granted') {
    const registration = await navigator.serviceWorker.ready;
    
    await registration.showNotification('Task Complete! âœ…', {
      body: `${taskName} finished successfully`,
      icon: '/icons/success.png',
      badge: '/icons/badge.png',
      actions: [
        { action: 'view', title: 'View Results' },
        { action: 'dismiss', title: 'OK' }
      ],
      data: { result: result },
      requireInteraction: true
    });
  }
}

// Usage
await processLargeDataset(); // Takes 5 minutes
await notifyTaskComplete('Data Processing', { processed: 10000 });</code></pre>

<h3>Reminder System</h3>
<pre><code>class ReminderSystem {
  static async scheduleReminder(title, time, data = {}) {
    const now = Date.now();
    const delay = time - now;
    
    if (delay > 0) {
      setTimeout(async () => {
        await this.showReminder(title, data);
      }, delay);
      
      console.log(`Reminder scheduled for ${new Date(time)}`);
    }
  }
  
  static async showReminder(title, data) {
    if (Notification.permission === 'granted') {
      const registration = await navigator.serviceWorker.ready;
      
      await registration.showNotification(`â° Reminder: ${title}`, {
        body: data.description || 'You asked to be reminded',
        icon: '/icons/reminder.png',
        requireInteraction: true,
        actions: [
          { action: 'done', title: 'âœ… Done' },
          { action: 'snooze', title: 'ğŸ˜´ Snooze 10min' }
        ],
        data: data,
        tag: `reminder-${data.id}`
      });
    }
  }
}

// Schedule reminder
ReminderSystem.scheduleReminder(
  'Feed the unicorns',
  Date.now() + 60 * 60 * 1000, // 1 hour from now
  { id: 'r1', description: 'They love magical carrots!' }
);</code></pre>

<h2>ğŸ’¡ 2025 Best Practices</h2>

<ol style="list-style:decimal;padding-left:2em;">
<li style="margin:1em 0;"><strong>Request permission wisely</strong> â€” Ask when users see value, not on page load</li>
<li style="margin:1em 0;"><strong>Be respectful</strong> â€” Don't spam users with notifications</li>
<li style="margin:1em 0;"><strong>Use meaningful content</strong> â€” Make notifications valuable and actionable</li>
<li style="margin:1em 0;"><strong>Handle denied permission</strong> â€” App should work without notifications</li>
<li style="margin:1em 0;"><strong>Use tags wisely</strong> â€” Replace old notifications with same tag</li>
<li style="margin:1em 0;"><strong>Provide opt-out</strong> â€” Easy way to disable notifications in your app</li>
<li style="margin:1em 0;"><strong>Test on all platforms</strong> â€” Behavior varies across browsers/OS</li>
<li style="margin:1em 0;"><strong>HTTPS required</strong> â€” Notifications only work on secure origins</li>
</ol>

<h3>Permission Best Practices</h3>
<pre><code>// âŒ BAD: Ask immediately on page load
window.onload = () => {
  Notification.requestPermission();
};

// âœ… GOOD: Explain value first, then ask
function enableNotifications() {
  // Show modal explaining benefits
  showModal({
    title: 'Enable Notifications?',
    message: 'Get notified when unicorns need you!',
    onAccept: async () => {
      const granted = await Notification.requestPermission();
      if (granted === 'granted') {
        showNotification('ğŸ‰ Notifications enabled!');
      }
    }
  });
}</code></pre>

<h2>ğŸ¯ Platform Differences</h2>

<table style="width:100%;margin:2em 0;border-collapse:collapse;">
<thead>
<tr style="background:linear-gradient(135deg,#667eea,#764ba2);">
<th style="padding:1em;color:white;">Platform</th>
<th style="padding:1em;color:white;">Support</th>
<th style="padding:1em;color:white;">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="padding:0.8em;border:1px solid #ddd;"><strong>Desktop Chrome</strong></td>
<td style="padding:0.8em;border:1px solid #ddd;">âœ… Full</td>
<td style="padding:0.8em;border:1px solid #ddd;">Actions, images, all features</td>
</tr>
<tr>
<td style="padding:0.8em;border:1px solid #ddd;"><strong>Desktop Firefox</strong></td>
<td style="padding:0.8em;border:1px solid #ddd;">âœ… Full</td>
<td style="padding:0.8em;border:1px solid #ddd;">Excellent support</td>
</tr>
<tr>
<td style="padding:0.8em;border:1px solid #ddd;"><strong>Desktop Safari</strong></td>
<td style="padding:0.8em;border:1px solid #ddd;">âœ… Good</td>
<td style="padding:0.8em;border:1px solid #ddd;">Limited action buttons</td>
</tr>
<tr>
<td style="padding:0.8em;border:1px solid #ddd;"><strong>Android Chrome</strong></td>
<td style="padding:0.8em;border:1px solid #ddd;">âœ… Full</td>
<td style="padding:0.8em;border:1px solid #ddd;">System notifications</td>
</tr>
<tr>
<td style="padding:0.8em;border:1px solid #ddd;"><strong>iOS Safari</strong></td>
<td style="padding:0.8em;border:1px solid #ddd;">âœ… iOS 16.4+</td>
<td style="padding:0.8em;border:1px solid #ddd;">Finally supported!</td>
</tr>
</tbody>
</table>

<p class="a">ğŸŒŸ âœ¨ ğŸŒˆ</p>

<p><a href="fetch.html">Continue to Fetch API: Modern Data Retrieval â†’</a></p>

<div class="pf">
<h4>ğŸ”” 2025 Notification Wisdom ğŸ””</h4>
<div class="moneybags">
<p><strong>Excellent Support:</strong> Web Notifications work in all modern browsers, including iOS Safari (16.4+)!</p>
<p style="margin-top:1em;"><strong>Push vs Local:</strong></p>
<ul style="list-style:disc;padding-left:2em;margin-top:0.5em;">
<li><strong>Local Notifications</strong> â€” Triggered by your website code while page is open</li>
<li><strong>Push Notifications</strong> â€” Sent from server, work even when site is closed (requires Service Worker)</li>
</ul>
<p style="margin-top:1em;"><strong>Respect Users:</strong> Notification spam is the #1 way to lose users. Only send valuable, timely notifications!</p>
<p style="margin-top:1em;">ğŸ”’ <strong>Security:</strong> Notifications only work on HTTPS (except localhost). This protects users from malicious notifications.</p>
<p style="margin-top:1em;">ğŸ“š <strong>Resources:</strong> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API" target="_blank" style="color:#9b59b6;font-weight:bold;">MDN Notifications API</a></p>
</div>
</div>

<p class="c">ğŸ¦„ Enchanted with Unicorn Magic ğŸ¦„<br>
<small style="opacity:0.7;">Modern web standards â€¢ Unicorn magic by Web Wizards</small></p>

<script src="j/jquery.js"></script>
<script src="j/dih5.js"></script>

</body>
</html>
